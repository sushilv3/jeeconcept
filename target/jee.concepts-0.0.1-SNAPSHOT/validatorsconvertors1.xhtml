<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
	<title>Button Actions</title>
	<h:outputStylesheet library="css" name="bulma.min.css" />
</h:head>
<h:body>
	
	<h:panelGroup layout="block" styleClass="container">
		<br />
		<h:outputText value="Convertors" styleClass="is-size-5-desktop" />
		<br />
		<h:messages errorClass="has-text-danger"/>
		<h:form id="form" prependId="false">
			<img id="ajaxStatus"
				src="#{request.contextPath}/resources/images/loading.gif" />
			<br />
			<h:panelGrid id="panel" columns="2" border="0" cellpadding="10" 
				styleClass="table is-bordered is-striped is-narrow is-hoverable" cellspacing="1">
				<f:facet name="header">
					<h:outputText value="Student Details" />
				</f:facet>

				<h:inputText value="#{convertorExampleBean1.name}" id="Name" required="true" p:placeholder="Enter name" >
					<f:validator validatorId="noBlankSpaceValidator"/>
					<f:validateLength for="Name" minimum="5" maximum="15"/>					
				</h:inputText> 
				<h:message for="Name" styleClass="has-text-danger"/>
				
				<h:inputText value="#{convertorExampleBean1.address}" id="Address" required="true" p:placeholder="Enter address" >
					<f:validator validatorId="noBlankSpaceValidator"/>
					<f:validateLength for="Address" minimum="5" maximum="15"/>
				</h:inputText> 
				<h:message for="Address" styleClass="has-text-danger"/>
				
				<h:inputText value="#{convertorExampleBean1.age}" id="Age" required="true" p:placeholder="Enter age">
					<f:validateLongRange for="Age" minimum="18" maximum="60"/>
				</h:inputText> 
				<h:message for="Age" styleClass="has-text-danger"/>
				
				<h:inputText value="#{convertorExampleBean1.percentScore}" id="Score" required="true" p:placeholder="Enter percent score">
					<f:validateDoubleRange minimum="0.0" maximum="100.0"/>
				</h:inputText> 
				<h:message for="Score" styleClass="has-text-danger"/>
				
				<f:facet name="footer">
					<h:panelGroup style="display:block; text-align:center">
						<h:commandButton value="Submit" styleClass="button is-dark"
							action="#{convertorExampleBean1.save}">
						</h:commandButton>
					</h:panelGroup>
				</f:facet>
			</h:panelGrid>
			<br />
			<h:button value="Go Back" outcome="/index"
				styleClass="button is-primary"></h:button> #{'    '}
			
			
		</h:form>
	</h:panelGroup>
	<script>
		const ajaxStatusEl = document.querySelector("#ajaxStatus");
		ajaxStatusEl.style.visibility = "hidden";
		function ajaxHandler(data) {

			console.table(data);
			if (data.status === 'complete') {
				console.log('Request Completed.')
				ajaxStatus.style.visibility = "hidden";
			}

			if (data.status === 'begin') {
				console.log('Request Started..')
				ajaxStatusEl.style.visibility = "visible";
			}
		}
	</script>
</h:body>
</html>